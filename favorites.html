<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Your Favorites — Rudhvi Vastraa</title>
  <link rel="icon" type="image/png" sizes="256x256" href="img-logo-removebg.png">

  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Playfair+Display:wght@400;600;700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" type="image/png" sizes="256x256" href="img-logo-removebg.png">
</head>

<body>

  <div class="site-nav">
    <div class="inner">

      <div class="brand">
        <img class="logo-img" src="text-logo.png" onclick="window.location.href='index.html'"
          alt="Rudhvi Vastraa Logo" />
      </div>

      <div class="nav-icons">
        <input type="text" id="inlineSearch" class="inline-search-input" placeholder="Type to search...">

        <a href="javascript:void(0)" class="icon-btn" onclick="handleSearchClick()">
          <svg width="24" height="24" fill="none">
            <circle cx="11" cy="11" r="7.5" stroke="white" stroke-width="1.8"></circle>
            <line x1="16" y1="16" x2="21" y2="21" stroke="white" stroke-width="1.8"></line>
          </svg>
        </a>

        <a href="cart.html" class="icon-btn cart-btn" aria-label="Cart">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="9" cy="21" r="1" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round" />
            <circle cx="20" cy="21" r="1" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round" />
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6" stroke="#FFFFFF" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round" />
          </svg>
          <span class="cart-badge" id="cartCount">0</span>
        </a>

        <a href="index.html" class="icon-btn cart-btn">
          <svg width="24" height="24" fill="none">
            <path d="M3 10.5L12 3L21 10.5V20C21 20.6 20.6 21 20 21H4C3.4 21 3 20.6 3 20V10.5Z" stroke="white"
              stroke-width="1.8" />
            <path d="M9 21V14H15V21" stroke="white" stroke-width="1.8" />
          </svg>
        </a>

                <a href="profile.html" class="icon-btn" aria-label="Profile">
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
       xmlns="http://www.w3.org/2000/svg">
    <circle cx="12" cy="7" r="4" stroke="#FFFFFF" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round" />
    <path d="M4 21c0-4 4-7 8-7s8 3 8 7" 
          stroke="#FFFFFF" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round"/>
  </svg>
</a>
        
      </div>
    </div>

  </div>

  <main>
    <h1>Your Favorites</h1>
    <div id="favList"></div>
  </main>

  <section id="contact" class="contact fade-up">
    <div style="max-width:1000px;margin:auto;">
      <h2>Get in Touch</h2>
      <p>For product enquiries, collaborations, or assistance, reach out to us below.</p>
      <div class="contact-links">

        <a href="https://wa.me/918106662341" class="contact-pill" target="_blank">WhatsApp</a>
        <a href="https://instagram.com/rudhvi_vastraa" class="contact-pill" target="_blank">Instagram</a>
        <a href="https://youtube.com/@rudhvivastraa" class="contact-pill" target="_blank">YouTube</a>

      </div>
    </div>
  </section>

  <footer>© <span id="year"></span> Rudhvi Vastraa — All rights reserved</footer>

  <script>
    document.getElementById("year").textContent = new Date().getFullYear();

    let favorites = JSON.parse(localStorage.getItem("favorites")) || [];
    let cart = JSON.parse(localStorage.getItem("cart")) || [];

    function updateCartCount() {
      const total = cart.reduce((sum, i) => sum + (i.qty || 0), 0);
      document.getElementById("cartCount").textContent = total;
    }

    function renderFavorites() {
      const list = document.getElementById("favList");

      // Load latest favorites again
      favorites = JSON.parse(localStorage.getItem("favorites")) || [];

      if (favorites.length === 0) {
        list.innerHTML = `
      <p style="text-align:center;padding:50px 0;font-size:18px;color:#777;">
        No favorites added yet ❤️
      </p>`;
        return;
      }

      list.innerHTML = favorites.map(s => `
    <div class="tile">

      <div class="img-wrapper" onclick="window.location.href='product-details.html?id=${s.id}'" style="cursor:pointer;">
        <img src="${s.image}" alt="${s.name}">
      </div>

      <div class="tile-content" onclick="window.location.href='product-details.html?id=${s.id}'" style="cursor:pointer;">
        <h3>${s.name}</h3>
        <p class="desc">${(s.desc || '').substring(0, 50)}...</p>
        <p class="price"><strong>₹${s.price.toLocaleString('en-IN')}</strong></p>
      </div>

      <div class="tile-actions">
        <button class="btn-cart" onclick="addToCart('${s.id}')">Add to Cart</button>

        <div class="fav-btn" onclick="removeFavorite('${s.id}')">
          <svg width="24" height="24" fill="#d32f2f">
            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 
              2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81
              4.5 2.09C13.09 3.81 14.76 3 16.5 3
              19.58 3 22 5.42 22 8.5c0 3.78-3.4 
              6.86-8.55 11.54L12 21.35z"/>
          </svg>
        </div>
      </div>

    </div>
  `).join("");

      updateCartCount();
    }

    function removeFavorite(id) {
      favorites = favorites.filter(f => f.id !== id);
      localStorage.setItem("favorites", JSON.stringify(favorites));
      renderFavorites();
    }

    function addToCart(id) {
      const s = favorites.find(item => item.id === id);
      if (!s) return;

      let existing = cart.find(c => c.id === id);
      if (existing) existing.qty++;
      else cart.push({ ...s, qty: 1 });

      localStorage.setItem("cart", JSON.stringify(cart));
      updateCartCount();
      showToast(`${s.name} added to cart`);
    }

    // --- FIXED SHOW TOAST FUNCTION ---
    function showToast(msg) {
      // 1. Remove existing toast if present (prevents overlapping)
      const existing = document.getElementById("toast");
      if (existing) existing.remove();

      // 2. Create the element dynamically
      const t = document.createElement('div');
      t.className = 'toast show'; // Add 'show' class to ensure visibility
      t.id = 'toast';             // Add ID because your CSS likely targets #toast
      t.textContent = msg;
      
      document.body.appendChild(t);

      // 3. Remove it after 3 seconds
      setTimeout(() => {
        t.remove();
      }, 3000);
    }

    function handleSearchClick() {
      const searchInput = document.getElementById("inlineSearch");

      // If already active → search
      if (searchInput.classList.contains("active")) {
        const query = searchInput.value.trim();
        if (query.length > 0) {
          window.location.href = `search.html?q=${encodeURIComponent(query)}`;
        } else {
          searchInput.classList.remove("active");
        }
      } else {
        // Activate search box
        searchInput.classList.add("active");
        searchInput.focus();
      }
    }

    // ENTER key triggers search
    document.getElementById("inlineSearch").addEventListener("keypress", function (event) {
      if (event.key === "Enter") {
        const query = this.value.trim();
        if (query.length > 0) {
          window.location.href = `search.html?q=${encodeURIComponent(query)}`;
        }
      }
    });

    window.onload = () => {
      updateCartCount();
      renderFavorites();
    };

  </script>
</body>

</html>
