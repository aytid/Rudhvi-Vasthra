<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Your Favorites — Rudhvi Vastraa</title>
  <link rel="icon" type="image/png" sizes="256x256" href="img-logo-removebg.png">

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Playfair+Display:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" type="image/png" sizes="256x256" href="img-logo-removebg.png">
</head>

<body>

<!-- NAVBAR -->
<div class="site-nav">
  <div class="inner">

    <div class="brand">
      <img class="logo-img" src="text-logo.png" onclick="window.location.href='index.html'" alt="Rudhvi Vastraa Logo" />
    </div>

    <div class="nav-icons">
      <input type="text" id="inlineSearch" class="inline-search-input" placeholder="Type to search...">

      <a href="javascript:void(0)" class="icon-btn" onclick="handleSearchClick()">
        <svg width="24" height="24" fill="none">
          <circle cx="11" cy="11" r="7.5" stroke="white" stroke-width="1.8"></circle>
          <line x1="16" y1="16" x2="21" y2="21" stroke="white" stroke-width="1.8"></line>
        </svg>
      </a>

      <a href="cart.html" class="icon-btn cart-btn" aria-label="Cart">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M6 7h12l1 14H5L6 7z" stroke="white" stroke-width="1.8" stroke-linejoin="round"/>
          <path d="M9 7a3 3 0 0 1 6 0" stroke="white" stroke-width="1.8" stroke-linecap="round"/>
        </svg>
        <span class="cart-badge" id="cartCount">0</span>
      </a>

      <a href="index.html" class="icon-btn cart-btn">
        <svg width="24" height="24" fill="none">
          <path d="M3 10.5L12 3L21 10.5V20C21 20.6 20.6 21 20 21H4C3.4 21 3 20.6 3 20V10.5Z"
            stroke="white" stroke-width="1.8"/>
          <path d="M9 21V14H15V21" stroke="white" stroke-width="1.8"/>
        </svg>
      </a>
    </div>
  </div>

</div>

<!-- PAGE TITLE -->
<main>
  <h1>Your Favorites</h1>
  <div id="favList"></div>
</main>

<!-- CONTACT + FOOTER -->
<section id="contact" class="contact fade-up">
    <div style="max-width:1000px;margin:auto;">
      <h2>Get in Touch</h2>
      <p>For product enquiries, collaborations, or assistance, reach out to us below.</p>
      <div class="contact-links">

        <a href="https://wa.me/918106662341" class="contact-pill" target="_blank">WhatsApp</a>
        <a href="https://instagram.com/rudhvi_vastraa" class="contact-pill" target="_blank">Instagram</a>
        <a href="https://youtube.com/@rudhvivastraa" class="contact-pill" target="_blank">YouTube</a>

      </div>
    </div>
</section>

<footer>© <span id="year"></span> Rudhvi Vastraa — All rights reserved</footer>

<div id="toast" class="toast"></div>

<!-- ====================== JS SECTION ====================== -->
<script>
document.getElementById("year").textContent = new Date().getFullYear();

let favorites = JSON.parse(localStorage.getItem("favorites")) || [];
let cart = JSON.parse(localStorage.getItem("cart")) || [];

function updateCartCount(){
  const total = cart.reduce((sum, i) => sum + (i.qty || 0), 0);
  document.getElementById("cartCount").textContent = total;
}

function renderFavorites(){
  const list = document.getElementById("favList");

  if(favorites.length === 0){
    list.innerHTML = `<p style="text-align:center;padding:40px;font-size:18px;">No favorites added yet ❤️</p>`;
    updateCartCount();
    return;
  }

  list.innerHTML = favorites.map(s => `
    <div class="tile">

      <!-- IMAGE -->
      <div class="img-wrapper" style="position:relative;cursor:pointer;" 
            onclick="window.location.href='product-details.html?id=${s.id}'">

        <img src="${s.image}" alt="${s.name}" style="${s.soldOut ? 'opacity:0.6;' : ''}">

        ${s.soldOut 
          ? `<span style="
                position:absolute;
                top:10px;
                left:10px;
                background:#000;
                color:#fff;
                font-size:12px;
                padding:4px 8px;
                border-radius:4px;
              ">SOLD OUT</span>`
          : ''
        }
      </div>

      <!-- CONTENT -->
      <div class="tile-content" onclick="window.location.href='product-details.html?id=${s.id}'" style="cursor:pointer;">
        <h3>${s.name}</h3>
        <p class="desc">${(s.desc || "").substring(0,50)}...</p>
        <p class="price"><strong>₹${s.price.toLocaleString('en-IN')}</strong></p>
      </div>

      <!-- ACTIONS -->
      <div class="tile-actions">

        ${
          s.soldOut
          ? `<button class="btn-cart" disabled style="cursor:not-allowed;">Sold Out</button>`
          : `<button class="btn-cart" onclick="addToCart('${s.id}')">Add to Cart</button>`
        }

        <div class="fav-btn" onclick="removeFavorite('${s.id}')">
          <svg width="24" height="24" fill="#d32f2f" viewBox="0 0 24 24">
            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 
              2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81
              4.5 2.09C13.09 3.81 14.76 3 16.5 3
              19.58 3 22 5.42 22 8.5c0 3.78-3.4 
              6.86-8.55 11.54L12 21.35z"/>
          </svg>
        </div>

      </div>
    </div>
  `).join("");

  updateCartCount();
}

function removeFavorite(id){
  favorites = favorites.filter(f => f.id !== id);
  localStorage.setItem("favorites", JSON.stringify(favorites));
  renderFavorites();
}

function addToCart(id){
  const item = favorites.find(f => f.id === id);
  if(!item) return;

  let existing = cart.find(c => c.id === id);
  existing ? existing.qty++ : cart.push({ ...item, qty: 1 });

  localStorage.setItem("cart", JSON.stringify(cart));
  showToast("Added to cart");
  updateCartCount();
}

function showToast(msg){
  const t = document.getElementById("toast");
  t.textContent = msg;
  t.classList.add("show");
  setTimeout(()=> t.classList.remove("show"), 1600);
}

function handleSearchClick() {
  const searchInput = document.getElementById("inlineSearch");

  // If already active → search
  if (searchInput.classList.contains("active")) {
    const query = searchInput.value.trim();
    if (query.length > 0) {
      window.location.href = `search.html?q=${encodeURIComponent(query)}`;
    } else {
      searchInput.classList.remove("active");
    }
  } else {
    // Activate search box
    searchInput.classList.add("active");
    searchInput.focus();
  }
}

// ENTER key triggers search
document.getElementById("inlineSearch").addEventListener("keypress", function (event) {
  if (event.key === "Enter") {
    const query = this.value.trim();
    if (query.length > 0) {
      window.location.href = `search.html?q=${encodeURIComponent(query)}`;
    }
  }
});


window.onload = () => {
  renderFavorites();
  updateCartCount();
};
</script>

</body>
</html>
